<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.SysOrg//DTD Mapper 3.0//EN" "http://mybatis.SysOrg/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.crcm.auth.mapper.OauthClientDetailsMapper">

    <!--查询客户端根据客户端ID-->
    <select id="selectClientById" parameterType="java.lang.String" resultType="com.crcm.auth.model.ClientsDTO">
        select
        client_id as "clientId",
        client_secret as "clientSecret",
        resource_ids as "resourceIds",
        scope,
        authorized_grant_types as "authorizedGrantTypes",
        web_server_redirect_uri as "registeredRedirectUris",
        authorities as "authorities",
        access_token_validity as "accessTokenValiditySeconds",
        refresh_token_validity as "refreshTokenValiditySeconds",
        additional_information as "additionalInformation",
        auto_approve as "autoApproveScopes"
        from sys_oauth_client_details
        where client_id=#{clientId}
    </select>

    <select id="selectListClient" resultType="com.crcm.auth.model.ClientsDTO">
        select
        client_id as "clientId",
        client_secret as "clientSecret",
        resource_ids as "resourceIds",
        scope,
        authorized_grant_types as "authorizedGrantTypes",
        web_server_redirect_uri as "registeredRedirectUris",
        authorities as "authorities",
        access_token_validity as "accessTokenValiditySeconds",
        refresh_token_validity as "refreshTokenValiditySeconds",
        additional_information as "additionalInformation",
        auto_approve as "autoApproveScopes"
        from sys_oauth_client_details
    </select>

    <!--新增客户端-->
    <insert id="insertClient" parameterType="com.crcm.auth.model.ClientsDTO">
        insert into sys_oauth_client_details
        (client_id,resource_ids,client_secret,scope,authorized_grant_types,web_server_redirect_uri,access_token_alidity
        ,refresh_token_validity,additional_information,autoApproveScopes)
        values
        (#{clientId},#{resourceIds},#{clientSecret},#{scope},#{authorizedGrantTypes},#{registeredRedirectUris},#{accessTokenValiditySeconds}
        ,#{refreshTokenValiditySeconds},#{additionalInformation},#{auto_approve})
    </insert>

</mapper>
